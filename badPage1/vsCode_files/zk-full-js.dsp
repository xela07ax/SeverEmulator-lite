

$(function(){function a(b){if(window.JSON&&window.JSON.stringify){return window.JSON.stringify(b)}return str("",{"":b})}if(!window.EB){window.EB={}}if(!EB.pubsub){EB.pubsub={listeners:[],subscribe:function(b,c){this.listeners[b]=c;window.addEventListener("storage",function(d){if(d.newValue&&d.key==b){c(jQuery.parseJSON(d.newValue))}},false)},publish:function(b,c){if(this.listeners[b]){this.listeners[b](c)}localStorage.setItem(b,a(c));localStorage.removeItem(b)}}}});
$(function(){function a(b){if(window.JSON&&window.JSON.stringify){return window.JSON.stringify(b)}return str("",{"":b})}if(!window.ELK){window.ELK={}}if(!ELK.pubsub){ELK.pubsub={listeners:[],subscribe:function(b,c){this.listeners[b]=c;window.addEventListener("storage",function(d){if(d.newValue&&d.key==b){c(jQuery.parseJSON(d.newValue))}},false)},publish:function(b,c){if(this.listeners[b]){this.listeners[b](c)}localStorage.setItem(b,a(c));localStorage.removeItem(b)}}}});
function modalWin(b,a,d){var e=window.open(b,d,"toolbar=no,directories=no,status=no,scrollbars=yes,resizable=yes,modal=false");if(e){e.focus();return true}else{var c=new zul.wnd.Window({border:"normal",title:"Внимание!",closable:true,sizable:true,sclass:"dialog",onClose:function(){c.detach()},width:"500px",children:[new zul.wgt.Label({value:"В настройках вашего браузера включено блокирование всплывающих окон. "}),new zul.wgt.Label({value:"Необходимо отключить данную настройку в браузере, "}),new zul.wgt.Label({value:"либо отключить опцию 'Открывать документы в новом окне браузера' в 'Настройках клиента'."})]});zk.Widget.$("$main").appendChild(c);c.doModal();return false}}function signWin(a){var c=navigator.userAgent.toLowerCase();var e=false;if(c.indexOf("firefox")!=-1){e=true}var b=600;var i=460;var d=parseInt((screen.availWidth/2)-(b/2));var h=parseInt((screen.availHeight/2)-(i/2));var g="width="+b+",height="+i+",left="+d+",top="+h+",toolbar=no,directories=no,status=1,scrollbars=yes,resizable=no,modal=false";var f=window.open(a,"",g);f.focus();return false}function dispatchLinkClickEvent(d,c){c.value=d;if(document.createEvent){var b=document.createEvent("HTMLEvents");b.initEvent("onclick",false,false);c.dispatchEvent(b);var a=document.createEvent("HTMLEvents");a.initEvent("change",false,false);received.dispatchEvent(a)}else{if(document.createEventObject){c.fireEvent("onclick");c.fireEvent("onchange")}}}function clickOnNotifier(a){zAu.send(new zk.Event(zk.Widget.$(jq("$main")),"onUser",{command:"clickOnNotifier",notificationGlobalId:a}))}function afterNotifierClose(a){zAu.send(new zk.Event(zk.Widget.$(jq("$main")),"onUser",{command:"afterNotifierClose",notificationGlobalId:a}))}function notifierOpenClientMessageDialog(a){zAu.send(new zk.Event(zk.Widget.$(jq("$main")),"onUser",{command:"notifierOpenClientMessageDialog",notificationGlobalId:a}))}$.extend($.gritter.options,{position:"bottom-right",time:3000});function doDetachScrollerInner(a){var e=zk.Widget.$("$docQuickViewPaneHolder");if(!e){return}var d=e.getOpen();var c=zk.Widget.$(a);var b=new zul.wnd.Window({border:"normal",title:"Список документов",closable:true,sizable:true,onClose:function(){zk.Widget.$("$docQuickViewPaneHolder").setOpen(d);b.detach();zk.Widget.$("$scrollpanel_holder").appendChild(c);if(screenfull.enabled){screenfull.exit()}}});b.appendChild(c);zk.Widget.$("$main").appendChild(b);e.setOpen(false);b.setMaximized(true);if(screenfull.enabled){screenfull.request()}b.doModal()}function doDetachScroller(){doDetachScrollerInner("$docbrowsePane")}zAu.onError(function(e,f){var d=false;if("410"==f||(0==f&&!e.responseText)){if(zk.Desktop.all){for(desktop in zk.Desktop.all){var c=zk.Desktop.$(desktop);if(c){if(c.broken){continue}d=true;c.broken=true;if(zk.cpsp&&zk.cpsp.stop){zk.cpsp.stop(desktop)}}}}if(!d){return}var b=new zul.wnd.Window({border:"normal",title:"Внимание!",closable:true,sizable:true,sclass:"dialog",onClose:function(){b.detach()},width:"500px",children:[new zul.wgt.Label({value:"Сессия истекла, закройте текущую вкладку"}),]});var a=zk.Widget.$("$main");if(a){a.appendChild(b)}b.doModal()}});function portalOpenDoc(e,b,d,a,c){if(!EB||!EB.pubsub||!EB.pubsub.publish){alert("Портальное API недоступно. Открытие документа по ссылке невозможно.");return}EB.pubsub.publish("openUfosDoc",{title:e,globalDocumentId:b,action:d,documentType:a,subSystem:c})}function openDocumentByLink(e,b,d,a,c){if(!ELK||!ELK.pubsub||!ELK.pubsub.publish){alert("ELK API недоступно. Открытие документа по ссылке невозможно.");return}ELK.pubsub.publish("openDocumentByLink",{title:e,globalDocumentId:b,action:d,documentType:a,subSystem:c})}function portalCloseCurrentTab(){if(!EB||!EB.pubsub||!EB.pubsub.publish){alert("Портальное API недоступно. Закрытие текущей вкладки невозможно.");return}EB.pubsub.publish("closeCurrentTab",{})}function copyURLtoClipboard(a){copyToClipboard(window.location.protocol+"//"+window.location.host+a)}function copyToClipboard(f){var a=function(h){var i=h.hasAttribute("readonly");if(!i){h.setAttribute("readonly","")}h.select();h.setSelectionRange(0,h.value.length);if(!i){h.removeAttribute("readonly")}};var e=document.createElement("textarea");var b=document.documentElement.getAttribute("dir")=="rtl";e.style.fontSize="12pt";e.style.border="0";e.style.padding="0";e.style.margin="0";e.style.position="absolute";e.style[b?"right":"left"]="-9999px";var d=window.pageYOffset||document.documentElement.scrollTop;e.style.top=d+"px";e.setAttribute("readonly","");e.value=f;document.body.appendChild(e);a(e);try{var g=document.execCommand("copy");if(g){jq('<div id="note">Ссылка скопирована в буфер обмена</div>').appendTo(document.body)}else{window.prompt("Скопировать в буфер обмена: Ctrl+C, Enter",f)}}catch(c){window.prompt("Скопировать в буфер обмена: Ctrl+C, Enter",f)}document.body.removeChild(e)};
zk.load("zul.mesh,otr",function(){var a={};otr.Frozen=zk.override(zul.mesh.Frozen.prototype,a,{_syncFrozenCellsPosition:function(v){var u=this.parent,B=[u.eheadrows,u.ebodyrows,u.efootrows],C=this._columns;if(v===undefined){var w=u.ehead,z=u.ebody,v=0;if(z){v=z.scrollLeft}else{if(w){v=w.scrollLeft}}}for(var F=0;F<B.length;F++){if(!B[F]){continue}var I=B[F].childNodes,L=I.length;for(var G=0;G<L;G++){var x=C,J=I[G].childNodes;if(F==0){if(zk(I[G]).$().$instanceof(zul.mesh.Auxhead)){var y=0;for(var H=0;H<J.length;H++){var K=J[H].colSpan;if(!K){K=1}y++;x-=K;if(x<=0){break}}x=y;for(var E=0;E<G;E++){var t=I[E].childNodes;for(var D=0;D<C;D++){var A=t[D];var k=A.rowSpan;if(k&&k>(G-E)){x--}}}}}if(x>0){jq(J).slice(0,x).css({transform:"translate3d("+jq.px0(v)+", 0, 0)",zIndex:1})}}}},_clearColumnBorders:function(){var e=this.parent,f=this._lastFrozenCols,d=this.$s("col");if(f&&0!=f.length){for(var c=0;c<f.length;c++){if(f[c]){var b=f[c].nextSibling;b&&jq(b).css("border-left","")}}}jq(e.$n()).find("."+d).removeClass(d)}})});
(function(){var a=jq(document);a.on({focus:function(){var c=jq(this);var b=c.attr("head_ref");jq("."+b).addClass("iterator-header-highlighted")},blur:function(){var c=jq(this);var b=c.attr("head_ref");jq("."+b).removeClass("iterator-header-highlighted")}},".iterator-body input[head_ref]")})();function fixHeaders(l){var k=$("#"+l);var e="center";if(k.stickyTableHeaders){k.stickyTableHeaders("destroy");var g=$(k.parents('[class*="tabpanel"]:first'));var d=$(k.parents('[style*="overflow"]:first'));var b=d&&d.length>0&&d[0]&&d[0].style.cssText.indexOf("overflow-x: auto")>=0;if(!d||!d[0]||b){d=g;if(!d||!d[0]){d=$(".vertical-layout:first",".doc-content-view");if(!d||!d[0]){d=$(".doc-content-view:first");e="doc-content-view"}else{e="vertical-layout"}}else{e="tabpanel"}}else{e="scrollPane"}if(!d||!d[0]){return}if(!g){k.stickyTableHeaders({scrollableArea:d,scrollableParent:e});return}var c;var m=navigator.userAgent;if(m.indexOf("MSIE")!=-1||m.indexOf("Trident")!=-1){var a=$(k.parents(".z-tabbox:first"));var f=a.children(".z-tabpanels").children(".z-tabpanel");var j=a.children(".z-tabs").find(".z-tab");for(i=0;i<f.length;i++){var h=$(f[i]).attr("id");if(g.attr("id")===h){c=$(j[i]);break}}}k.stickyTableHeaders({scrollableArea:d,scrollableParent:e,tab:c})}}function unfixHeaders(b){var a=$("#"+b);if(a.stickyTableHeaders){a.stickyTableHeaders("destroy")}}function addScrollEventListener(b){var a=$("#"+b);var d=$(a.parents('[class*="tabpanel"]:first'));var c=$(a.parents('[style*="overflow"]:first'));if(!c||!c[0]){if(d&&d[0]&&scrollbarVisible(d[0])){c=d}if(!c||!c[0]){c=$(".vertical-layout:first",".doc-content-view");if(!scrollbarVisible(c)&&!scrollbarVisible(c[0])){if(!c||!c[0]){c=$(".doc-content-view:first")}}}}if(!c||!c[0]){return}c[0].addEventListener("scroll",function(f){localStorage.removeItem(c[0].id+"_tab_scrollTop");localStorage.removeItem(c[0].id+"_tab_scrollHeight");localStorage.removeItem(c[0].id+"_tab_clientHeight");localStorage.setItem(c[0].id+"_tab_scrollTop",c[0].scrollTop);localStorage.setItem(c[0].id+"_tab_scrollHeight",c[0].scrollHeight);localStorage.setItem(c[0].id+"_tab_clientHeight",c[0].clientHeight)})}function scrollbarVisible(a){if(typeof(a)!=="undefined"&&typeof(a.scrollHeight)!=="undefined"&&typeof(a.clientHeight)!=="undefined"){return a.scrollHeight>a.clientHeight}return false}function scrollPositionRestore(b){var a=$("#"+b);var d=$(a.parents('[class*="tabpanel"]:first'));var c=$(a.parents('[style*="overflow"]:first'));if(!c||!c[0]){if(d&&d[0]&&scrollbarVisible(d[0])){c=d}if(!c||!c[0]){c=$(".vertical-layout:first",".doc-content-view");if(!scrollbarVisible(c)&&!scrollbarVisible(c[0])){if(!c||!c[0]){c=$(".doc-content-view:first")}}}}if(!c||!c[0]){return}if(scrollbarVisible(c[0])){c[0].scrollTop=localStorage.getItem(c[0].id+"_tab_scrollTop");c[0].scrollHeight=localStorage.getItem(c[0].id+"_tab_scrollHeight");c[0].clientHeight=localStorage.getItem(c[0].id+"_tab_clientHeight")}};

	
	
		function createUuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(d){var b=Math.random()*16|0,a=d=="x"?b:(b&3|8);return a.toString(16)})}function JinnSignExtensionProvider(){}JinnSignExtensionProvider.prototype=(function(){var s={};var i="JinnSignExtensionSecretKey";var j=null;var l=null;var r=null;var c=null;var b={};var m=false;var v;var n=function(){if(l!==null){console.debug("using PPAPI");return l}var x=navigator.userAgent,w,y=x.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];console.log("\tUser agent : "+x);if(/trident/i.test(y[1])){l=false;v="IE"}else{if(y[1]=="Chrome"){l=true;v=y[1]}else{if(y[1]=="Firefox"){l=true;v=y[1]}else{console.log("\tNo. PPAPI won't be used. ("+y[1]+")");l=false;v=y[1]}}}return l};var f=function(){if(c!==null){return c}if(n()){c=true;return c}if(!r){console.error("\n[isAsync] : _objNPAPI is undefined\n");return undefined}if(r.CreateXmlCryptoContextAsync!==undefined&&r.CreateBinaryBase64CryptoContextAsync!==undefined){c=true;return c}c=false;console.log("ASYNC IS "+c);return c};var h=function(){if(window.ActiveXObject!==undefined){console.log("Browser is Internet Explorer");return true}console.log("Browser NOT is Internet Explorer");return false};var p=function(){console.log("Checking extension...");if(j){return j}if(n()){return t()}else{return u()}};var k=function(y,w,x){console.debug("[extensionCall], method = "+y);if(n()){return d(y,w,x)}else{return a(y,w,x)}};var t=function(){var w=$.Deferred();j=w.promise();w.resolve({type:"PPAPI",async:f(),});return j};var d=function(D,z,C){console.log("[PPAPIextensionCall]...");var x=$.Deferred();var y=createUuid();s[y]=x;if(!z){console.error("\tContext is null/undefined...");var w={error:"Работа с контекстом завершена",};x.reject(w);return x.promise()}var B={id:y,context:z,method:D,data:C||{},};var A={source:"page",secret_key:i,message:B,};p().then(function(){try{console.log("\tposting event message to '*' : \n\t"+JSON.stringify(A));window.postMessage(A,"*")}catch(F){console.log("\terror/exception occured: "+F);var E={error:F};x.reject(E);s[y]=null}},function(E){console.log("error : "+E);x.reject(E);s[y]=null});return x.promise()};if(n()){console.log("Adding 'message' eventListener on window");window.addEventListener("message",function(z){if(z.data.source!=="content_script"){console.log("not a 'content_script'. ignoring...");return}if(z.data.secret_key!==i){console.error("Ignoring : secretKey doesn't match. \n\tevent.data.secret_key = "+z.data.secret_key+", \n\t_secretKey = "+i);return}if(!z.data.message){console.error("Wrong message from content script");return}var y=z.data.message;if(!y.id||!y.context){console.error("Wrong message from content script");return}var x=y.data;var w=s[y.id];if(!w){console.log("Cannot find deferred for message id = ["+y.id+"].\n\tmessage content = "+JSON.stringify(x));return}console.log("Got message event : \n\t"+JSON.stringify(z.data));try{if(v=="Chrome"){if(chrome.runtime&&chrome.runtime.lastError){w.reject({result:-1,error:chrome.runtime.lastError,});return}}if(!x){console.error("Extension work error");w.reject({result:-1,error:"Ошибка в работе расширения",});return}if(x.result){console.log("response.result = "+JSON.stringify(x.result));if(!m){delete x.signature}w.reject(x);return}console.log("resolving response : "+JSON.stringify(x));w.resolve(x)}catch(A){console.error("Error while content script message processing : "+A)}finally{s[y.id]=null}},false)}var g=function(){if(!r){try{if(document.getElementById("jinn-npapi-object")==null){var x=document.createElement("div");x.setAttribute("id","jinn-npapi-object-wrapper");document.getElementsByTagName("body")[0].appendChild(x);wrapperObj=document.getElementById("jinn-npapi-object-wrapper");wrapperObj.innerHTML='<object id="jinn-npapi-object" type="application/x-vnd.jinnbrowserplugin"></object>'}r=document.getElementById("jinn-npapi-object");console.log("Successfully created NPAPIObject : "+JSON.stringify(r))}catch(w){console.error("exception while creating NPAPIobject : "+w)}}return r};var u=function(){console.log("***[checkNPAPIExtension]...");var w=$.Deferred();j=w.promise();$(document).ready(function(){try{var z=g();if(h()){console.log("*** \tIE");if(!z||z.version===undefined){w.reject({error:"Плагин недоступен",type:"NPAPI",})}else{w.resolve({type:"NPAPI",async:f(),})}}else{var x=navigator.mimeTypes["application/x-vnd.jinnbrowserplugin"];if(!x){x=navigator.mimeTypes["application/x-vnd.JinnBrowserPlugin"]}if(!x||!x.enabledPlugin){console.log("Error : Plugin is not installed");w.reject({error:"Плагин не установлен",type:"NPAPI",})}else{if(!z){console.error("Error occured while interacting with plugin");w.reject({error:"Ошибка взаимодействия с плагином",type:"NPAPI",})}else{console.log("*** [checkNPAPIExtension] Resolving NPAPI ANYWAY.");w.resolve({type:"NPAPI",async:f(),})}}}}catch(y){console.log("*** [checkNPAPIExtension] ERROR : "+y);w.reject({error:"Невозможно создать объект для работы с плагином",type:"NPAPI",})}});return j};var a=function(z,x,y){console.log("[NPAPIextensionCall], method = "+z+", context = "+x);var w=$.Deferred();p().then(function(){try{if(z==="CreateXmlCryptoContext"){if(f()){b[x]=r.CreateXmlCryptoContextAsync()}else{b[x]=r.CreateXmlCryptoContext()}console.log("$$$ resolving on CreateXmlCryptoContext");w.resolve()}else{if(z==="CreateBinaryBase64CryptoContext"){if(f()){b[x]=r.CreateBinaryBase64CryptoContextAsync()}else{console.debug("************ TRYING TO CREATE CONTEXT : _objNPAPI.CreateBinaryBase64CryptoContext() ************");b[x]=r.CreateBinaryBase64CryptoContext()}console.log("$$$ resolving on CreateBinaryBase64CryptoContext");w.resolve()}else{if(z==="SignDocumentWithTransform"){if(!b[x]){console.error("CryptoContext is not initialized. Rejecting SignDocumentWithTransform");w.reject({result:-1,error:"Криптоконтекст не проинициализирован",})}else{console.log("OK context for SignDocumentWithTransform is initialized");var F=b[x];if(f()){F.SignDocumentWithTransform(JSON.stringify(y),function(G){w.resolve(JSON.parse(G))},function(G){var H=JSON.parse(G);if(!m){delete H.signature}w.reject(JSON.parse(G))})}else{console.log("RUN SYNC");var C=y.options||{};F.SetJinnProperty("JinnTitleDocument",C.documentTitle||"");F.SetJinnProperty("JinnOwnerCertificateName",C.ownerCertificateName||"");F.SetJinnProperty("JinnOwnerCertificatePosition",C.ownerCertificatePosition||"");F.SetJinnProperty("ShowOperationResult",C.showResult?"TRUE":"FALSE");var A=F.SignDocumentWithTransform(y.doc||"",C.elementUri||"",y.xslt||"",C.xsltUri||"",C.signedProperties||"",C.unsignedProperties||"",C.propertiesNamespaceRef||"",C.propertiesNamespacePrefix||"",C.needVisualize||false);if(F.LastError.ErrorCode!=0){w.reject({result:F.LastError.ErrorCode,error:F.LastError.ErrorMessage,})}else{if(C.certificate){var E=F.CheckSignature(y.doc||"",y.xslt||"",A||"",C.certificate||"",C.needVisualize||false);if(F.LastError.ErrorCode!=0){var B={result:F.LastError.ErrorCode,error:F.LastError.ErrorMessage,signature:A,};if(!m){delete B.signature}w.reject(B)}else{if(!E){var B={result:0,error:"Подпись неверна",signature:A,};if(!m){delete B.signature}w.reject(B)}else{w.resolve({result:0,signature:A,})}}}else{w.resolve({result:0,signature:A,})}}}}}else{if(z==="SignDocument"){console.log("NPAPIextensionCall ::: method is SignDocument");if(!b[x]){console.error("CryptoContext is not initialized. Rejecting SignDocument");w.reject({result:-1,error:"Криптоконтекст не проинициализирован",})}else{var F=b[x];if(f()){F.SignDocument(JSON.stringify(y),function(G){w.resolve(JSON.parse(G))},function(G){var H=JSON.parse(G);if(!m){delete H.signature}w.reject(JSON.parse(G))})}else{var C=y.options||{};console.log("Setting jinn properties...");F.SetJinnProperty("JinnTitleDocument",C.documentTitle||"");F.SetJinnProperty("JinnOwnerCertificateName",C.ownerCertificateName||"");F.SetJinnProperty("JinnOwnerCertificatePosition",C.ownerCertificatePosition||"");F.SetJinnProperty("ShowOperationResult",C.showResult?"TRUE":"FALSE");var A=F.SignDocument(y.doc||"",C.mymeType||"text",C.signedAttributes||"",C.unsignedAttributes||"",C.needVisualize||false);if(F.LastError.ErrorCode!=0){w.reject({result:F.LastError.ErrorCode,error:F.LastError.ErrorMessage,})}else{if(C.certificate){var E=F.CheckSignature(y.doc||"",C.mimeType||"text",A||"",C.certificate||"",C.needVisualize||false);if(F.LastError.ErrorCode!=0){var B={result:F.LastError.ErrorCode,error:F.LastError.ErrorMessage,signature:A,};if(!m){delete B.signature}w.reject(B)}else{if(!E){var B={result:0,error:"Подпись неверна",signature:A,};if(!m){delete B.signature}w.reject(B)}else{w.resolve({result:0,signature:A,})}}}else{w.resolve({result:0,signature:A,})}}}}}else{if(z==="SignHashDocument"){if(!b[x]){w.reject({result:-1,error:"Криптоконтекст не проинициализирован",})}else{var F=b[x];if(f()){F.SignHashDocument(JSON.stringify(y),function(G){w.resolve(JSON.parse(G))},function(G){var H=JSON.parse(G);if(!m){delete H.signature}w.reject(JSON.parse(G))})}else{var C=y.options||{};F.SetJinnProperty("ShowOperationResult",C.showResult?"TRUE":"FALSE");var A=F.SignHashDocument(y.hash||"",C.mymeType||"text",C.signedAttributes||"",C.unsignedAttributes||"");if(F.LastError.ErrorCode!=0){w.reject({result:F.LastError.ErrorCode,error:F.LastError.ErrorMessage,})}else{if(C.certificate){var E=F.CheckHashSignature(y.hash||"",A||"",C.certificate||"");console.log("Certificate is valid = "+E);if(F.LastError.ErrorCode!=0){var B={result:F.LastError.ErrorCode,error:F.LastError.ErrorMessage,signature:A,};if(!m){delete B.signature}w.reject(B)}else{if(!E){console.error("signature is invalid");var B={result:0,error:"Подпись неверна",signature:A,};if(!m){delete B.signature}w.reject(B)}else{w.resolve({result:0,signature:A,})}}}else{w.resolve({result:0,signature:A,})}}}}}else{if(z==="CloseCryptoContext"){if(!b[x]){b[x].Close()}w.resolve()}else{console.log("ERROR : Unsopported method");w.reject({result:-1,error:"Метод не поддерживается",})}}}}}}}catch(D){console.error("EXCEPTION : "+D);w.reject({result:-1,error:D.message,})}},function(A){console.error("REJECTING : "+A);w.reject(A)});return w.promise()};var o=function(){this.uuid=createUuid();this.promise=null};o.prototype.Close=function(){var w=this.uuid;this.uuid=null;var x=function(){return k("CloseCryptoContext",w)};this.promise=this.promise.then(x,x);return this.promise};var q=function(){o.call(this);this.promise=k("CreateXmlCryptoContext",this.uuid)};q.prototype=new o();q.prototype.constructor=q;q.prototype.SignDocumentWithTransform=function(A,z,x){var y=this.uuid;var w=function(){return k("SignDocumentWithTransform",y,{doc:A,xslt:z,options:x||{},})};this.promise=this.promise.then(w,w);return this.promise};q.prototype.GetPromise=function(){return this.promise};var e=function(){o.call(this);this.promise=k("CreateBinaryBase64CryptoContext",this.uuid)};e.prototype=new o();e.prototype.constructor=e;e.prototype.SignDocument=function(z,x){var y=this.uuid;var w=function(){console.log("\n@@@@ SignDocument = [function 'sign'] calling extensionCall('SignDocument', "+y+") \n");return k("SignDocument",y,{doc:z,options:x||{},})};this.promise=this.promise.then(w,w);return this.promise};e.prototype.SignHashDocument=function(z,x){var y=this.uuid;var w=function(){return k("SignHashDocument",y,{hash:z,options:x||{},})};this.promise=this.promise.then(w,w);return this.promise};p();return{constructor:JinnSignExtensionProvider,CreateXmlCryptoContext:function(){return new q()},CreateBinaryBase64CryptoContext:function(){return new e()},CheckExtension:function(){return p()}}})();
	

zk.afterLoad("zul.sel",function(){var a={};zk.override(zul.sel.SelectWidget.prototype,a,{fireOnSelect:function(f,b){var g=[];for(var e=this.getSelectedItems(),d=e.length;d--;){if(e[d].isSelected()){g.push(e[d])}}var i,c=true;var h=false;if(this._multiple&&this._headercm){h=jq(this._headercm).hasClass(zk.Widget.$(this._headercm).$s("checked"))&&g.length==this._totalSize}if(b){i=b.data;if(this._multiple){c=(i.ctrlKey||i.metaKey)||i.shiftKey||(this._checkmark&&(!this._cdo||h))}}this.fire("onSelect",zk.copy({items:g,reference:f,clearFirst:!c,selectAll:h},i),{rtags:{selectAll:h}})}})});
zk.load("zul.wnd",function(){var a={};zk.override(zul.wnd.Window.prototype,a,{unbind_:function(){var b=this.$n();zk(b).beforeHideOnUnbind();b.style.visibility="hidden";if(!zk.css3){jq.unzsync(this)}if(this._shadowWgt){this._shadowWgt.destroy();this._shadowWgt=null}if(this._drag){this._drag.destroy();this._drag=null}if(this._sizer){this._sizer.destroy();this._sizer=null}if(this._mask){this._mask.destroy();this._mask=null}if(zk.ie>9){var c=jq(b).find("iframe");if(c.length){c.hide().remove()}}zk(b).undoVParent();zWatch.unlisten({onFloatUp:this,onSize:this,onShow:this,onHide:this,onResponse:this});this.setFloating_(false);this.domUnlisten_(b,"onMouseMove");this.domUnlisten_(b,"onMouseOut");this.$supers(zul.wnd.Window,"unbind_",arguments)}})});
zk.afterLoad("zk",function(){var d={},a=null,b=null;window.onblur=function(){if(a&&b){a._finishDrag(b,false)}};function f(j,g,h,i){if(j<=g){return c(j,g,h,30,i)}return c(j,g,h,0,i)}function c(k,g,i,h,j){if(j<0){return 0}if(k-g-i>h){return j}if(h==0&&(j<i)&&i>(k-g)){return Math.min(j,k-g)}if(h==0){return k-g}if(k-i>h){return i}return k-h}function e(h,i,g){var k=f(jq(window).width(),jq(h.node).width(),g.pageX,i[0]),j=f(jq(window).height(),jq(h.node).height(),g.pageY,i[1]);return[k,j]}zk.override(zk.Draggable.prototype,d,{_draw:function(t,v){var l=this.node,k=zk(l),q=k.cmOffset(),g=this.opts;if(g.ghosting){var h=k.scrollOffset();q[0]+=h[0]-this._innerOfs[0];q[1]+=h[1]-this._innerOfs[1]}var o=this._currentDelta(),s=g.scroll;q[0]-=o[0];q[1]-=o[1];if(s&&(s!=window&&this._isScrollChild)){q[0]-=s.scrollLeft-this.orgScrlLeft;q[1]-=s.scrollTop-this.orgScrlTop}var j=[t[0]-q[0]-this.offset[0],t[1]-q[1]-this.offset[1]],m=g.snap;if(m){if(typeof m=="function"){j=m(this,j)}else{if(m instanceof Array){j=[Math.round(j[0]/m[0])*m[0],Math.round(j[1]/m[1])*m[1]]}else{j=[Math.round(j[0]/m)*m,Math.round(j[1]/m)*m]}}}if(this.z_scrl){j[0]-=this.z_scrl[0];j[1]-=this.z_scrl[1]}var i=l.style;var n=v.currentTarget;if(n&&n.$instanceof(zul.wnd.Window)){g.constraint=e}if(typeof g.draw=="function"){g.draw(this,this.snap_(j,g),v)}else{if(typeof g.constraint=="function"){var u=g.constraint(this,j,v);if(u){j=u}j=this.snap_(j,g);i.left=jq.px(j[0]);i.top=jq.px(j[1])}else{j=this.snap_(j,g);if((!g.constraint)||(g.constraint=="horizontal")){i.left=jq.px(j[0])}if((!g.constraint)||(g.constraint=="vertical")){i.top=jq.px(j[1])}}}if(i.visibility=="hidden"){i.visibility=""}},_startDrag:function(g){d._startDrag.apply(this,arguments);a=this;b=g},_finishDrag:function(g,h){a=null;b=null;d._finishDrag.apply(this,arguments)}})});
zk.load("otr",function(){otr.CalendarCommon=function(){var a=this;this.cache={};this.calendar=null;this.useIndustrialCalendar=null;this.loadData=function(c,b){if(a.hasYear(c)){if(b){b._markCalendar(a.cache[c])}}else{a.calendar=b;zAu.send(new zk.Event(null,"xonLoadCal",{year:c},{toServer:true}))}};this.hasYear=function(b){return b in a.cache};this.onYearLoaded=function(b){a.cache[b.year]=b;if(a.calendar){a.calendar.rerender();a.calendar=null}};this.isUseIndustrailCalendar=function(){return a.useIndustrialCalendar};this.onLoadUseIndustrialCalendar=function(b){a.useIndustrialCalendar=b};this.loadUseIndustrialCalendar=function(){zAu.send(new zk.Event(null,"xonLoadUseIndustrialCalendar",{},{toServer:true}))}};zAu.cmd0.onCallData=function(a){otr.CalendarInstance.onYearLoaded(a)};zAu.cmd0.onLoadUseIndustrialCalendar=function(a){otr.CalendarInstance.onLoadUseIndustrialCalendar(a)};otr.CalendarInstance=new otr.CalendarCommon();zk.afterMount(function(){otr.CalendarInstance.loadUseIndustrialCalendar()})});
function stickComponent(a,e,d,c){a.css("padding-top",(e.height()+d)+"px");e.addClass("sticky");var b=c-a.offset().top;e.css("top",b);e.css("position","absolute")}function unstickComponent(a,c,b){a.css("padding-top",b+"px");c.removeClass("sticky");c.css("top","");c.css("position","")}function updateTabStickies(l){var k=$(l);if(!k||!k[0]){return}var a=k.find(".z-tabbox");if(!a.length){return}if(a.first().parent().hasClass("z-vlayout-inner")){var g=$(".doc_scale_default");if(!g.length){return}var j=$(".doc-edit-frame-center .doc-content-view .vertical-layout");var b=j.offset().top;var d=parseInt(a.css("padding-top"));var c=a.find(".z-tabs");var f=[];for(var e=0;e<c.length;e++){f[e]=c.eq(e).offset().top+j.scrollTop()}var h=[];j.scroll(function(){var o=j.scrollTop();for(var n=0;n<f.length;n++){if(o+b>=f[n]){if(h.indexOf(n)<0){h.push(n)}}else{if(h.indexOf(n)>=0){h.pop()}}unstickComponent(a.eq(n),c.eq(n),d)}if(h.length>0){var m=h[h.length-1];stickComponent(a.eq(m),c.eq(m),d,b)}})}}function setTabboxMaxHeight(e){var d=$(e);if(!d||!d[0]){return}var c=d.find(".z-tabbox");if(!c.length){return}if(!c.first().parent().hasClass("z-vlayout-inner")){if($(c[0]).find(".iterator-footer")&&$(c[0]).find(".iterator-footer")[0]){return}var f=d.height()-18;var h=f-10;var g=h-5;$(c[0]).css("height",h);$(c[0]).css("max-height",f);var a=$(c[0]).children(".z-tabpanels").children(".z-tabpanel");if(!a||!a[0]){return}for(var b=0;b<a.length;b++){$(a[b]).css({"max-height":g});$(a[b]).css({"overflow-y":"scroll"});$(a[b]).css({"overflow-x":"auto"})}}};
if("undefined"===typeof UfosNotification){(function(){this.UfosNotification={requestPermission:function(a){if("Notification" in window){if(Notification.permission==="granted"){return}Notification.requestPermission(function(b){console.log("Got permission from user: "+b);if(b==="granted"&&a){new Notification(a)}})}},showNotification:function(f,d,b,c,a){if("Notification" in window){if(Notification.permission==="denied"){return}if(Notification.permission!=="granted"){requestPermission()}if(Notification.permission==="granted"){var e=new Notification(f,{body:d,icon:c,tag:a});if(b){e.onclick=function(){window.open(b);window.focus()}}}}else{if(zk.ie10||zk.ie11_){}}}}})()};
zk.afterLoad("zul.inp",function(){var a={};zk.override(zul.inp.InputWidget.prototype,a,{setDisabled:function(d,c){a.setDisabled.apply(this,arguments);if(!zk.ff){return}var b=this.getInputNode();if(b){b.disabled=null;b.readOnly=this._disabled||this._readonly}},setReadonly:function(d,c){a.setReadonly.apply(this,arguments);if(!zk.ff){return}var b=this.getInputNode();if(b){b.readOnly=this._disabled||this._readonly}},textAttrs_:function(){if(!zk.ff){return a.textAttrs_.apply(this,arguments)}var d=this._disabled;var c=this._readonly;this._disabled=null;this._readonly=d||c;var b=a.textAttrs_.apply(this,arguments);this._disabled=d;this._readonly=c;return b}})});
zk.afterLoad("zul.sel",function(){var a={};zk.override(zul.sel.ItemWidget.prototype,a,{doSelect_:function(b){if(this.isDisabled()||!this.isSelectable()||(b.domTarget.className.indexOf("z-button")>=0&&this.className==="zul.sel.Listitem")){return}try{this._userSelection=true;if(!b.itemSelected){this.getMeshWidget()._doItemSelect(this,b);b.itemSelected=true}this.$supers("doSelect_",arguments)}finally{this._userSelection=null}}})});